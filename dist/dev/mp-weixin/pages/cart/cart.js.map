{"version":3,"file":"cart.js","sources":["../../../../../src/pages/cart/cart.vue","../../../../../uniPage:/cGFnZXMvY2FydC9jYXJ0LnZ1ZQ"],"sourcesContent":["<!-- 静态数据演示版本 适合任何后端 -->\n<template>\n    <view class=\"app\">\n        <button @click=\"openSkuPopup()\">打开SKU组件</button>\n\n        <vk-data-goods-sku-popup\n            ref=\"skuPopup\"\n            v-model=\"skuKey\"\n            border-radius=\"20\"\n            :z-index=\"990\"\n            :localdata=\"goodsInfo\"\n            :mode=\"skuMode\"\n            @open=\"onOpenSkuPopup\"\n            @close=\"onCloseSkuPopup\"\n            @add-cart=\"addCart\"\n            @buy-now=\"buyNow\"\n        ></vk-data-goods-sku-popup>\n    </view>\n</template>\n\n<script>\nexport default {\n    data() {\n        return {\n            // 是否打开SKU弹窗\n            skuKey: false,\n            // SKU弹窗模式\n            skuMode: 1,\n            // 后端返回的商品信息\n            goodsInfo: {}\n        };\n    },\n    // 监听 - 页面每次【加载时】执行(如：前进)\n    onLoad(options) {\n        this.init(options);\n    },\n    methods: {\n        // 初始化\n        init(options = {}) {},\n        // 获取商品信息，并打开sku弹出\n        openSkuPopup() {\n            /**\n             * 获取商品信息\n             * 这里可以看到每次打开SKU都会去重新请求商品信息,为的是每次打开SKU组件可以实时看到剩余库存\n             */\n            // 此处写接口请求，并将返回的数据进行处理成goodsInfo的数据格式，\n            // goodsInfo是后端返回的数据\n            this.goodsInfo = {\n                \"_id\": \"001\",\n                \"name\": \"iphone11\",\n                \"goods_thumb\": \"https://img14.360buyimg.com/n0/jfs/t1/59022/28/10293/141808/5d78088fEf6e7862d/68836f52ffaaad96.jpg\",\n                \"sku_list\": [\n                    {\n                        \"_id\": \"001\",\n                        \"goods_id\": \"001\",\n                        \"goods_name\": \"iphone11\",\n                        \"image\": \"https://img14.360buyimg.com/n0/jfs/t1/79668/22/9987/159271/5d780915Ebf9bf3f4/6a1b2703a9ed8737.jpg\",\n                        \"price\": 19800,\n                        \"sku_name_arr\": [\"红色\", \"128G\", \"公开版\"],\n                        \"stock\": 1000\n                    },\n                    {\n                        \"_id\": \"002\",\n                        \"goods_id\": \"001\",\n                        \"goods_name\": \"iphone11\",\n                        \"image\": \"https://img14.360buyimg.com/n0/jfs/t1/52252/35/10516/124064/5d7808e0E46202391/7100f3733a1c1f00.jpg\",\n                        \"price\": 9800,\n                        \"sku_name_arr\": [\"白色\", \"256G\", \"公开版\"],\n                        \"stock\": 100\n                    },\n                    {\n                        \"_id\": \"003\",\n                        \"goods_id\": \"001\",\n                        \"goods_name\": \"iphone11\",\n                        \"image\": \"https://img14.360buyimg.com/n0/jfs/t1/79668/22/9987/159271/5d780915Ebf9bf3f4/6a1b2703a9ed8737.jpg\",\n                        \"price\": 19800,\n                        \"sku_name_arr\": [\"红色\", \"256G\", \"公开版\"],\n                        \"stock\": 1\n                    }\n                ],\n                \"spec_list\": [\n                    {\n                        \"name\": \"颜色\",\n                        \"list\": [\n                            { \"name\": \"红色\" },\n                            { \"name\": \"黑色\" },\n                            { \"name\": \"白色\" }\n                        ]\n                    },\n                    {\n                        \"name\": \"内存\",\n                        \"list\": [\n                            { \"name\": \"128G\" },\n                            { \"name\": \"256G\" }\n                        ],\n                    },\n                    {\n                        \"name\": \"版本\",\n                        \"list\": [\n                            { \"name\": \"公开版\" },\n                            { \"name\": \"非公开版\" }\n                        ]\n                    }\n                ]\n            };\n            this.skuKey = true;\n        },\n        // sku组件 开始-----------------------------------------------------------\n        onOpenSkuPopup() {\n            console.log(\"监听 - 打开sku组件\");\n        },\n        onCloseSkuPopup() {\n            console.log(\"监听 - 关闭sku组件\");\n        },\n        // 加入购物车前的判断\n        addCartFn(obj) {\n            let { selectShop } = obj;\n            // 模拟添加到购物车,请替换成你自己的添加到购物车逻辑\n            let res = {};\n            let name = selectShop.goods_name;\n            if (selectShop.sku_name != \"默认\") {\n                name += \"-\" + selectShop.sku_name_arr;\n            }\n            res.msg = `${name} 已添加到购物车`;\n            if (typeof obj.success == \"function\") obj.success(res);\n        },\n        // 加入购物车按钮\n        addCart(selectShop) {\n            console.log(\"监听 - 加入购物车\");\n            this.addCartFn({\n                selectShop: selectShop,\n                success: res => {\n                    // 实际业务时,请替换自己的加入购物车逻辑\n                    this.toast(res.msg);\n                    setTimeout(() => {\n                        this.skuKey = false;\n                    }, 300);\n                }\n            });\n        },\n        // 立即购买\n        buyNow(selectShop) {\n            console.log(\"监听 - 立即购买\");\n            this.addCartFn({\n                selectShop: selectShop,\n                success: res => {\n                    // 实际业务时,请替换自己的立即购买逻辑\n                    this.toast(\"立即购买\");\n                }\n            });\n        },\n        toast(msg) {\n            uni.showToast({\n                title: msg,\n                icon: \"none\"\n            });\n        }\n    }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.app {\n    padding: 30rpx;\n    font-size: 28rpx;\n}\n</style>\n","import MiniProgramPage from 'D:/uniapp/erabbit-uni-app-vue3-ts/src/pages/cart/cart.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":"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"}