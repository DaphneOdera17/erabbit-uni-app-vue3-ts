{"version":3,"file":"category.js","sources":["../../../../../src/pages/category/category.vue","../../../../../uniPage:/cGFnZXMvY2F0ZWdvcnkvY2F0ZWdvcnkudnVl"],"sourcesContent":["<script setup lang=\"ts\">\n  import { onLoad } from '@dcloudio/uni-app';\n  import { getHomeBannerAPI } from '@/services/home'\n  import { getCategoryTopAPI } from '@/services/category'\n  import type { BannerItem } from '@/types/home';\n  import { computed, ref } from 'vue';\n  import type { CategoryTopItem } from '@/types/category';\n  import PageSkeleton from './components/PageSkeleton.vue';\n\n  // 获取轮播图数据\n  const bannerList = ref<BannerItem[]>([])\n  const getBannerData = async ()=>{\n    const res = await getHomeBannerAPI(2)\n    bannerList.value = res.result\n  }\n\n  // 获取分类列表数据\n  const categoryList = ref<CategoryTopItem[]>([])\n  const activeIndex = ref(0)\n  const getCategoryTopData = async () => {\n    const res = await getCategoryTopAPI()\n    categoryList.value = res.result\n  }\n\n  // 是否数据加载完毕\n  const isFinish = ref(false)\n  // 页面加载\n  onLoad(async () => {\n    await Promise.all([\n      getBannerData(),\n      getCategoryTopData()\n    ])\n    isFinish.value = true\n  })\n\n  // 提取当前二级分类数据\n  const subCategoryList = computed(()=> {\n    return categoryList.value[activeIndex.value]?.children || []\n  })\n</script>\n\n<template>\n  <view class=\"viewport\" v-if=\"isFinish\">\n    <!-- 搜索框 -->\n    <view class=\"search\">\n      <view class=\"input\">\n        <text class=\"icon-search\">女靴</text>\n      </view>\n    </view>\n    <!-- 分类 -->\n    <view class=\"categories\">\n      <!-- 左侧：一级分类 -->\n      <scroll-view class=\"primary\" scroll-y>\n        <view\n          v-for=\"(item, index) in categoryList\"\n          :key=\"item.id\"\n          class=\"item\"\n          :class=\"{ active: index === activeIndex }\"\n          @tap=\"activeIndex = index\"\n        >\n          <text class=\"name\"> {{item.name}} </text>\n        </view>\n      </scroll-view>\n      <!-- 右侧：二级分类 -->\n      <scroll-view class=\"secondary\" scroll-y>\n        <!-- 焦点图 -->\n        <XtxSwiper class=\"banner\" :list=\"bannerList\" />\n        <!-- 内容区域 -->\n        <view class=\"panel\" v-for=\"item in subCategoryList\" :key=\"item.id\">\n          <view class=\"title\">\n            <text class=\"name\">{{ item.name }}</text>\n            <navigator class=\"more\" hover-class=\"none\">全部</navigator>\n          </view>\n          <view class=\"section\">\n            <navigator\n              v-for=\"goods in item.goods\"\n              :key=\"goods.id\"\n              class=\"goods\"\n              hover-class=\"none\"\n              :url=\"`/pages/goods/goods?id=${goods.id}`\"\n            >\n              <image\n                class=\"image\"\n                :src=\"goods.picture\"\n              ></image>\n              <view class=\"name ellipsis\">{{ goods.name }}</view>\n              <view class=\"price\">\n                <text class=\"symbol\">¥</text>\n                <text class=\"number\">{{ goods.price }}</text>\n              </view>\n            </navigator>\n          </view>\n        </view>\n      </scroll-view>\n    </view>\n  </view>\n  <PageSkeleton v-else />\n</template>\n\n<style lang=\"scss\">\npage {\n  height: 100%;\n  overflow: hidden;\n}\n.viewport {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n.search {\n  padding: 0 30rpx 20rpx;\n  background-color: #fff;\n  .input {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    height: 64rpx;\n    padding-left: 26rpx;\n    color: #8b8b8b;\n    font-size: 28rpx;\n    border-radius: 32rpx;\n    background-color: #f3f4f4;\n  }\n}\n.icon-search {\n  &::before {\n    margin-right: 10rpx;\n  }\n}\n/* 分类 */\n.categories {\n  flex: 1;\n  min-height: 400rpx;\n  display: flex;\n}\n/* 一级分类 */\n.primary {\n  overflow: hidden;\n  width: 180rpx;\n  flex: none;\n  background-color: #f6f6f6;\n  .item {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 96rpx;\n    font-size: 26rpx;\n    color: #595c63;\n    position: relative;\n    &::after {\n      content: '';\n      position: absolute;\n      left: 42rpx;\n      bottom: 0;\n      width: 96rpx;\n      border-top: 1rpx solid #e3e4e7;\n    }\n  }\n  .active {\n    background-color: #fff;\n    &::before {\n      content: '';\n      position: absolute;\n      left: 0;\n      top: 0;\n      width: 8rpx;\n      height: 100%;\n      background-color: #27ba9b;\n    }\n  }\n}\n.primary .item:last-child::after,\n.primary .active::after {\n  display: none;\n}\n/* 二级分类 */\n.secondary {\n  background-color: #fff;\n  .carousel {\n    height: 200rpx;\n    margin: 0 30rpx 20rpx;\n    border-radius: 4rpx;\n    overflow: hidden;\n  }\n  .panel {\n    margin: 0 30rpx 0rpx;\n  }\n  .title {\n    height: 60rpx;\n    line-height: 60rpx;\n    color: #333;\n    font-size: 28rpx;\n    border-bottom: 1rpx solid #f7f7f8;\n    .more {\n      float: right;\n      padding-left: 20rpx;\n      font-size: 24rpx;\n      color: #999;\n    }\n  }\n  .more {\n    &::after {\n      font-family: 'erabbit' !important;\n      content: '\\e6c2';\n    }\n  }\n  .section {\n    width: 100%;\n    display: flex;\n    flex-wrap: wrap;\n    padding: 20rpx 0;\n    .goods {\n      width: 150rpx;\n      margin: 0rpx 30rpx 20rpx 0;\n      &:nth-child(3n) {\n        margin-right: 0;\n      }\n      image {\n        width: 150rpx;\n        height: 150rpx;\n      }\n      .name {\n        padding: 5rpx;\n        font-size: 22rpx;\n        color: #333;\n      }\n      .price {\n        padding: 5rpx;\n        font-size: 18rpx;\n        color: #cf4444;\n      }\n      .number {\n        font-size: 24rpx;\n        margin-left: 2rpx;\n      }\n    }\n  }\n}\n</style>\n","import MiniProgramPage from 'D:/uniapp/erabbit-uni-app-vue3-ts/src/pages/category/category.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","getHomeBannerAPI","getCategoryTopAPI","onLoad","computed"],"mappings":";;;;;;;;;;;;;;;AAOE,MAAA,eAAyB,MAAA;;;;AAGnB,UAAA,aAAaA,kBAAkB,CAAA,CAAE;AACvC,UAAM,gBAAgB,YAAU;AACxB,YAAA,MAAM,MAAMC,+BAAiB,CAAC;AACpC,iBAAW,QAAQ,IAAI;AAAA,IAAA;AAInB,UAAA,eAAeD,kBAAuB,CAAA,CAAE;AACxC,UAAA,cAAcA,kBAAI,CAAC;AACzB,UAAM,qBAAqB,YAAY;AAC/B,YAAA,MAAM,MAAME,kBAAAA;AAClB,mBAAa,QAAQ,IAAI;AAAA,IAAA;AAIrB,UAAA,WAAWF,kBAAI,KAAK;AAE1BG,kBAAAA,OAAO,YAAY;AACjB,YAAM,QAAQ,IAAI;AAAA,QAChB,cAAc;AAAA,QACd,mBAAmB;AAAA,MAAA,CACpB;AACD,eAAS,QAAQ;AAAA,IAAA,CAClB;AAGK,UAAA,kBAAkBC,cAAAA,SAAS,MAAK;;AACpC,eAAO,kBAAa,MAAM,YAAY,KAAK,MAApC,mBAAuC,aAAY;IAAC,CAC5D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrCH,GAAG,WAAW,eAAe;"}